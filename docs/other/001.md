# http 协议

## 常见状态码

- 1xx：服务器收到请求,还未返回
- 2xx：请求成功
  - 200 成功
- 3xx：重定向(配合 location,浏览器自动处理)
  - 301：永久重定向
  - 302：临时重定向
  - 307：临时重定向，但客户端必须保持原来的 HTTP 方法和请求体
  - 304：资源未被修改
- 4xx：客户端错误
  - 404：资源未找到
  - 403：无权限
  - 401：未通过认证
- 5xx：服务端错误
  - 504：网关超时
  - 500：服务器错误

## 常见 header

- 请求头
  - Accept：浏览器可接受的数据格式
  - Accept-Encoding：浏览器可接受的压缩算法，如 gzip
  - Accept-Language：浏览器可接受的语言，如 zh-CN
  - `Connection:keep-alive`：一次 TCP 连接重复使用
  - cookie
  - host:请求域名
  - User-Agent:UA 浏览器信息
  - Content-Type:发送数据的格式，比如 application/json
- 响应头
  - Content-Type:返回数据的格式
  - Content-length:返回数据的大小
  - Content-Encoding:返回时数据的压缩算法
  - Set-Cookie:修改 cookie
- 缓存相关
  - expires
  - Cache-Control
  - Last-Modified
  - Etag

## http 缓存

作用：让浏览器在合适的情况下复用已有资源，减少重复请求

可缓存资源：静态资源，比如 js.css,img

### 强制缓存

通过 `cache-control` 响应头控制,之前是通过 Expires 控制

常见值：

- max-age:设置缓存最大过期时间
- no-cache:不用本地缓存，向服务端请求，交给服务端决定缓存策略
- no-store:不用本地缓存和服务端的缓存措施，比如协商缓存

### 协商缓存(对比缓存)

1. 服务端缓存策略：判断某个文件是否可以被缓存
2. 服务器判断服务端和客户端资源是否一致
3. 如果一致返回 304，不一致则返回 200 和最新的资源

> 初次请求的时候服务端会返回资源和资源标识，客户端再次请求需要携带该资源标识，给服务端判断

资源标识分类：

- Last-Modified:资源最后修改时间，对应请求头 if-Modified-Since
- Etag:一个字符串，资源的唯一标识符，对应请求头 if-None-Match
