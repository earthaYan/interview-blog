# 压缩和 tree-shaking

## 压缩

Webpack 5 在 production 下默认启用 terser-webpack-plugin

## tree-shaking

含义：引入一个库，内部包含 100 个方法，但只使用了其中的一部分，最终打包结果中**仅保留被实际使用**的代码，未使用的代码在构建阶段被移除。

### 生效的必要条件

1. Tree Shaking 依赖静态分析，仅对 import / export 生效
2. 必须是 production 环境
3. 模块必须无副作用或正确声明副作用
4. 必须经过代码压缩

```js
const cssMinimizerPlugin = require("css-minimizer-webpack-plugin");

module.exports = merge(baseConfig, {
  mode: "production",
  optimization: {
    minimize: true,
    minimizer: ["...", new cssMinimizerPlugin()],
  },
});
```

:::tip
Webpack 5 在 production 下默认启用 terser-webpack-plugin
:::
