# vite 配置

## 基础配置

```html
<body>
  <div id="app"></div>
  <script src="./main.js" type="module"></script>
</body>
```

## 资源处理

1. 天生支持 css 和预处理语言,但是需要安装 less 本身
2. 支持 TS
3. 能处理各种资源

```js
import { defineConfig } from "vite";

export default defineConfig({
  //开发配置
  server: {},
  //构建配置
  build: {
    assetsInlineLimit: 20000,
  },
  resolve: {
    extensions: [".js", ".ts", ".css"],
    alias: {
      "@": __dirname + "/src",
    },
  },
  plugins: [],
});
```

## 插件-处理特殊语法

vite 本身只支持 js, TS，像 vue,jsx 这些特殊语法需要特殊配置插件

```js
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
export default defineConfig({
  plugins: [react()],
});
```

## 代码分割

vite 会自动分割异步引入的代码，但第三方库 vendor 以及特殊拆分需要借助 rollup 的 manualChunks，只在打包构建下生效

```js
import { defineConfig } from "vite";

export default defineConfig({
  build: {
    assetsInlineLimit: 20000,
    rollupOptions: {
      output: {
        dir: "/dist",
        //可自定义名称
        entryFileNames: "bundle.js",
        chunkFileNames: "[name].chunk.js",
        //将第三方库单独打包
        manualChunks: {
          react: ["react", "react-dom"],
        },
      },
    },
  },
});
```

## 共享配置

- base
- publicDir
- resolve.alias

## 自带模板仓库

webpack 本身不带模板仓库，需要通过 cra 脚手架等创建项目，而 vite 自带模板仓库
`npm create vite@latest my-vue-app -- --template react-ts`

## 兼容老浏览器

`npm install -D @vitejs/plugin-legacy`
