# react hooks-useEffect

- 状态管理：useState,useReducer,useContext
- 副作用管理：useEffect,useLayoutEffect
- 性能优化：useMemo,useCallback
- 引用管理：useRef

## react hooks 的执行顺序和依赖规则

- 渲染时需要确保 hooks 执行顺序，React 内部将组件的 hooks 组织成稳定的链表结构，所以不能条件式调用 hooks,必须放在组件顶层
- 明确的依赖关系
  - 无依赖数组：组件每次渲染后都会重新执行
  - 空依赖数组：仅在第一次渲染后执行一次
  - 非空依赖数组：依赖项变化时候执行

React 的依赖检查机制：`Object.is()`,对于原始类型比较值，对于引用类型比较引用地址

eslint 提供了`eslint-plugin-react-hooks`插件:rules-of-hooks/exhaustive-deps 两条规则

## useEffect

- 渲染本身：将 state/props 计算成 UI → 纯操作，无副作用
- 副作用：渲染过程中做了“额外事情”，可能会影响组件外的状态或系统，包括数据获取，dom 操作，事件监听，定时器，本地存储变更，触发全局状态变化

React 不希望副作用每次组件更新后都执行，而是仅在特定时机执行。

### useEffect 和 useLayoutEffect
