# useRef

::: tip
useRef 更新不会触发 react 组件的重渲染
:::

使用场景:需要一个变量抛开渲染周期持久化保存数据,但又不希望这个变量的变化会影响视图,即管理和**UI 无关**的数据

1. 访问操作 DOM:进入页面自动 focus 输入框
2. 存储和 UI 无关的数据:管理定时器
3. 缓存上一次的 prop 或者 state

```js
import { useRef, useEffect } from 'react';

/**
 * 缓存上一次的 props/state 值
 * @param {T} value - 需要缓存的目标值（任意类型：基本类型/对象/数组）
 * @returns {T | undefined} - 上一次渲染时的值（初始渲染返回 undefined）
 */
function usePrevious<T>(value: T): T | undefined {
  // 1. 创建 ref 存储上一次的值（持久化容器）
  const previousRef = useRef<T>();

  // 2. 渲染完成后，将当前值更新到 ref（确保下次渲染时能拿到“上一次”的值）
  // 依赖项：value 变化时才更新 ref
  useEffect(() => {
    previousRef.current = value;
  }, [value]);

  // 3. 返回上一次的值（本次渲染时，ref 还未被 useEffect 更新，因此是上一次的值）
  return previousRef.current;
}
```
