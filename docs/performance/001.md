# 前端性能优化(1)

![性能优化](.//imgs/better.png)

## 通用性能优化

方向 1：加载更快

1. 减少资源体积：压缩代码以及图片体积
2. 减少访问次数：合并代码，ssr 渲染(页面+数据)，利用缓存
3. 加快网络速度：CDN

方向 2：渲染更快

1. CSS 放在 head,script 放在 body
2. 尽早执行 JS,在 dom 加载完成后就执行
3. 使用懒加载：图片懒加载，上滑加载更多
4. DOM 查询进行缓存，合并 DOM 操作
5. 使用节流和防抖

## 缓存

静态资源添加 hash 后缀，文件不变则 hash 不变,从而请求的 url 也不会变，就会触发缓存返回 304

## RAF

动画需要达到 60 帧/s，即每 16s 左右需要更新一次动画。相较于 setTimeout,RAF 可以自动控制时间，同时在 iframe 或者标签隐藏的情况下会自动暂停

```js
function animate() {
  curWidth = curWidth + 3;
  $div.css(width, curWidth);
  if (curWidth < maxWidth) {
    window.requestAnimateFrame(animate);
  }
}
animate();
```

性能优化进阶：https://space.bilibili.com/3546718784195328/search?keyword=%E6%80%A7%E8%83%BD
