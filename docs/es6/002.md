---
outline: deep
---

# Set/Map/object

## 有序 vs 无序

1. 有序：操作慢，如数组
2. 无序：操作快，但无序，如对象

## map vs object

```js
const map = new Map([
  ["name", "张三"],
  ["title", "Author"],
]);
```

- map：有序但操作较快，key 可以是任意类型,拥有 set,delete,has 方法
- object：无序，操作快，但 key 只能是字符串类型

## map vs set

```js
let set = new Set(["red", "green", "blue"]);
```

- map：有序
- set：有序,操作快，set 元素不能重复，有 add,delete,has，clear 方法
- array：有序，操作慢

## weakMap 和 weakSet

主要作用：弱引用主要是避免因为一些错误代码操作导致内存泄漏

### weakMap

特点：

1. weakMap 只接受对象或者 symbol 作为 key
2. weakMap 键名所指向的对象，不计入垃圾回收机制
3. WeakMap 弱引用的只是键名，而不是键值
4. 没有遍历、size 等方法

场景：

```js
const wMap = new WeakMap();
const userInfo = { name: "zs" };
const cityInfo = { city: "sh" };
wMap.set(userInfo, cityInfo); //将二者建立联系，但各自保持独立，销毁不影响对方
```

### weakSet

1. 添加的值只能是对象
2. 没有遍历、size 等方法

## 对比

| 特性           | Object                           | Map                      | Set                      |
| -------------- | -------------------------------- | ------------------------ | ------------------------ |
| 数据结构类型   | 键值对（key–value）              | 键值对（key–value）      | 值集合（value）          |
| 键类型         | **字符串/符号**（String/Symbol） | **任意类型**（包括对象） | **唯一值**               |
| 元素顺序       | 无序（标准中未保证）             | **有序（按插入顺序）**   | **有序（按插入顺序）**   |
| 是否可迭代     | ❌ 需用 `Object.keys()`          | ✅ 直接可 `for...of`     | ✅ 直接可 `for...of`     |
| 性能（增删查） | 较慢（对象属性）                 | 快（哈希表实现）         | 快（哈希表实现）         |
| 常用用途       | 配置、静态数据结构               | 映射关系、缓存、动态键表 | 去重、权限集合、选中状态 |
